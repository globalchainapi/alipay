package alipay_test

import (
	"fmt"
	"os"

	alipay "github.com/smartwalle/alipay/v3"
)

var (
	appID = "2021002195626978"
	//appID = "2016073100129537"

	//privateKey = "MIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQC4UOTKtDstRrjyNPvek9eGqv1RYDmHtLw7olq4lBtqF/D+BfrPd04rMYoivqO5r+v1DQNUGs2yC48eQ4eWb0TSjl/kUy2jHzDcUGiZrGhgxw3e/TJ9w7ix6TrixVg5n542oC1zWstOl75gkiL7EkDfEKo/fZUbLt8aHgBW87NYE19obfAOxGn+YsH5Hpkl3GGby37Hq/mcX4tcWDYN55JPaAcSyjyeyl/uMA19StmQEuU992jqqYWd5Y3z58DotiD4dVAtjB5VogmCkLUcalvUB3N/z3y67GQT+gtOi42VfxnW/JoaXKurHK9Ukmw1GPu97iZAF3Sy19+mOdeR8I+RAgMBAAECggEAAXlEGwrN3lLOb8FUsjbkZkM/u0LVsuwTBTcLGqa0gWinmKBbnQULLvU6cYSssnNho5fzCt0b/+xvvII1t1I0bqqMwbqYhtFdBqXt8CycuQleZwYHPVIvS9zdh6qkRfGsxisJsf5r2bkE4KjKds9yjVYIxnEunAUH66GJxygzquSZQPxgYB3ASRkTzRRowe3ROqaGLF2ejEcvcASKAiIEaQ6Az0sMDtIUAcqFcN1mp9TQ+UyOgNsTw8qWHKv6z6XwjSfYcVfNhR5bcsf+3zr8CKK7cD6f6cjtIrrDSeDdbjdqXTMEYEOV4qs2PH6mNJwx2V1mAZKNZ3bIRGSiKme+sQKBgQD5UDqLBySXtqsCpMC31SvuHGOlkwEQAKslytJvE1kerh4VV9DCIyRsV9v57GZSc8HGo/AQq7dJAa3X9mumZ4vL8RIrtMkuU+scwT+AzPx8jeibNKLq1GI4GaPmdHJaJsBGtA2VUphWCw1HvHegJGgPUoymfpOc8iKwMdQZO3ZHxwKBgQC9QmWJ6zoBvkIOZdoNHpOMrHkIphzJagC/2dbdH6x58fEX787Nmd8yL3mU189EENmFJAdw9d5kPzi8Nxa84oIsbsQSTaYuF0VN6Kw+dZstoJ3U4pf5ReKjWiRNk6waeg6pzEYwH7mDbLcGBw+0+gW08KJLfsyl6aejJ75i9cnd5wKBgHa7UZYiabfi46BXq/wghlJYrNAOqWPgnaFa7Uq+0SN+Uo9hieba6565XOayQaykujUKn+qgjKI1LYB7N5tBFt+iSEAOUf1BM+g21DJX7Sq4Pn2j3K6vRLNo6ph2/nqWl91UJF/nvOrFSqbOR745eGFLs/Yas9v7qK92m4cEvXjDAoGAG2cOrp55YqE6jT0gCkBAGuEqER+EEYGgpCaVXqTkYy+tucqGBezejTSkhPGOWAucgxOJZEilL5ybyVyslSKyuF49U20cv5Ws+i/TKKP8mOmlkJpSaMw+mWpG0VitVZQQpXMnQnaFdMr74QqKsqh0xRMGXKn6VZd0J0Js5YUy+kcCgYEA5dxAzYHV2yH2/b/Uau99VUtp+xE3BssiEO5CiVLEvzLLQlqcqtFO3ptTMqfTeqe98iiYcr5EMSqLHte1qQeGziyKzPvMHkjrTPMDccVur0L2fcE+WBy2fNdBDzQQ5k3ra27/i5NcRzNAhoBXBNVRwnrLXpaUEjy7ERCoR6y1XkE="
	privateKey = "MIIEowIBAAKCAQEAkLybkaQjBJGlOzG3jA9wd3anKomhH33wGeP7XzZb27iNB4irEU8v77B1diNkrc277U+nXQOj5At6JHq3vz8OPyrB1LIQgXt0lbCl6PiUr773GB/16F17MAo8mCXlxA4SNUbWIJTrEXpg6ZHFQu+Zrz2lqairvzQBnM50Io+vSsKhr3ruGObhacdoBAOylxSc1795UB3wCu+txnLIY5zxDNvWraj3UCzjXO6PF+ees4IUlXqEzkkDN00j7moly274Q6e8w+p9zhIPzXy0jt2x5gUUaN+Gkk3ytHvT6lB7LWhBk92IUGSjGac5Omyx1keTUkc5ofiYKfqnF+BIcQ+21wIDAQABAoIBAH2exWNN03rWslNDHmx4xgNZv1MjKu37T1YZUoZb1rRIZFcinl8inJdrTzefFnXnN3GMDdWkIC4AbB2XST27C7F1edASUFMhhJmbPRSME/jJRQrySmtIH3AdomPnmJlmIRWOirCyr6d20QBIHa6v6HJ5jfxHwfDswW2InrGUhe7a2UoOiXoocD5CICCCexZkTmfeoW5SIky+5Ry6d3zCFwiMNI4pflLlfiOvvcgEj9mYTv+VWBbbAluS53Z8pgjsha1TkuGwqrpGHCNO8b/G8Sv60PeVUOo1ovIQJMeExFdz7Mo7H6vZXrKOH0bGmZkzCFRi1fq5zQCPSpwEPAebG7kCgYEA0WFwLOv4hEP2vnrjgfBGfCS8GrYj9wDtOGvQRt8xPpF1uAF1PVSQYYdYC68skwyEbyXujkzwoD3iQOtgWohUdwskll53i8lBU0vx+14q4t8EvnEZ3Kz16RU97cewmfbBc4aWEw0stfCQpEBBfjNR3o4Crt6uL8MoTSSpyScZTwMCgYEAsPaCmWxBWVwLw0D8rEVTC6rEkit6pbld1dFPI9Ax8jU/IWTV329vjN56KpFfzhHO0tWBv3rPVk+4Zp4LM0l3BFMZ0ilSnGv0+BHlAEv93ICoYV7ieEvwCVXZhtl8p2uDxDVTeaRNHg0WDTdjBXFsTwYPxmusaiVxvX5T74NAFp0CgYBW8CpvvJs38DBn7wbAUVAzA93HCZHtYckeAEY+5zW/UQ6cFJ7llFNO66+3Skkr1aq3q/xdwby4DHoBkrozXSAVPd83QIpK1In3WDVltjgAc7G4kaW3Z2nEGjnYnW3KwBabLWrrBjFmajjkunl3OT/pNPYQPg39bv8w6ORGzaFImQKBgCLOOV2ntyq2OfILZCcV84GF8ue0+YiC7vvRETnABzLWWjZdONubdVtFns2kji1fv0gkikJ5CzK0t1Ynm5hYyLnnBlsZmY/+g84O5vWp/KJUA8oy+WQju3B6nDAzsprTQLVkr6hrMmfItx+eVzGI336jeJLUNrMh7j8RC70+GWrZAoGBAK2O9FfVrfXh/TJn9faK53MY8ZoUr0ugOgAfDeaodcqk08nDSQl+Z5zNKN4vjpJ5zuyDaGgJX0iElZ+E/r6cgViMuJsfXALniu40I98SYFWUKDnnRMyLcCug1Efw7TI4r38H5yPOvgRchHCFaeibHeMDtPgmAjMP6rsRMU/67Isq"

	aliPublicKey = "MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAuyAFmr13r/APH7kkw6dMVJGLWuCFJ+z6IXu7Fqgmt0JHR/cRN6HdabxkSUAhphH/fNruAEpPihqcH5oR/JjFzwHKVMLO8UvyF9s42+DOTxxL+kalOYWsPgbV5H3pIrCFjMO0ZVsvdZQ35GbXNbef1muGwM6cASKkQCeacqLo9IL/1zOO0Lua/9iGoxxvMQeEuZ7Ht70iLE2QHY6KL/yqM6oSTIsd6ImTP/ARWMfEbiBiXpna81ytoAzVvmNB/2htBpbgP0s6yPu8yDsvLj24wPrjZzxDEprySxTfFrXZUyecQRx/ZjdQDvYeRouu5ytCqZSHP2eBHBmyGOkDgRA5lwIDAQAB"
)

var client *alipay.Client

func init() {
	var err error
	client, err = alipay.New(appID, privateKey, false)

	if err != nil {
		fmt.Println("初始化支付宝失败, 错误信息为", err)
		os.Exit(-1)
	}

	// 下面两种方式只能二选一
	var cert = false
	if cert {
		// 使用支付宝证书
		fmt.Println("加载证书", client.LoadAppPublicCertFromFile("appCertPublicKey_2016073100129537.crt"))
		fmt.Println("加载证书", client.LoadAliPayRootCertFromFile("alipayRootCert.crt"))
		fmt.Println("加载证书", client.LoadAliPayPublicCertFromFile("alipayCertPublicKey_RSA2.crt"))
	} else {
		// 使用支付宝公钥
		fmt.Println("加载公钥", client.LoadAliPayPublicKey(aliPublicKey))
	}
}
